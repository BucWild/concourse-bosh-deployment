---
- type: replace
  path: /releases/-
  value:
    name: bosh-aws-cpi
    url: https://bosh.io/d/github.com/cloudfoundry-incubator/bosh-aws-cpi-release?v=65
    sha1: 26b3a5c43e6f82594a373309a495660d6db26254
    version: 65

- type: replace
  path: /resource_pools/name=vms/stemcell?
  value:
    url: https://bosh.io/d/stemcells/bosh-aws-xen-hvm-ubuntu-trusty-go_agent?v=3421.11
    sha1: b7f3096d1b2271317ec96c84e448e14d8b0a7429

# Configure sizes
- type: replace
  path: /resource_pools/name=vms/cloud_properties?
  value:
    availability_zone: us-east-1b
    ephemeral_disk:
      size: 25000
      type: gp2
      instance_type: m3.xlarge

# Configure networks
- type: replace
  path: /networks/name=default/subnets/0/cloud_properties?
  value: {name: ((network_name))}

- type: replace
  path: /instance_groups/name=concourse/networks/name=default/static_ips?
  value: [((internal_ip))]

# Add CPI
- type: replace
  path: /cloud_provider/template?
  value:
    name: vsphere_cpi
    release: bosh-vsphere-cpi

# Cloud properties
- type: replace
  path: /cloud_provider/properties/vcenter?
  value:
    address: ((vcenter_ip))
    user: ((vcenter_user))
    password: ((vcenter_password))
    datacenters:
    - name: ((vcenter_dc))
      vm_folder: ((vcenter_vms))
      template_folder: ((vcenter_templates))
      datastore_pattern: ((vcenter_ds))
      persistent_datastore_pattern: ((vcenter_ds))
      disk_path: ((vcenter_disks))
      clusters:
      - ((vcenter_cluster)): { resource_pool: ((vcenter_resource_pool))}
